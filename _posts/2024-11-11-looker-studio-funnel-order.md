---
layout: post
division: blog
author: hong
ids: looker-studio-funnel-order
title:  "루커 스튜디오에서 퍼널 만들기 및 순서 강제 고정하기(CASE 문 활용)"
permalink: /blog/looker-studio-funnel-order/
categories:
  - blog
date:   2024-11-11 00:30:00 +9:00
image:  '/images/posts/looker-studio-funnel-order/thumb.png'
tags:   [looker-studio, data-visualization]
description: 루커 스튜디오에서 퍼널 차트를 만들고 CASE 문을 활용해 단계별 순서를 고정하는 방법을 알아봅니다.
keywords: [루커스튜디오,시각화,퍼널,순서,고정,데이터,CASE,분석]
---

## 1. 루커 스튜디오(Looker Studio)와 퍼널 분석 설명

퍼널 분석은 고객이 제품이나 서비스를 이용하는 과정에서 각 단계별로 어떤 행동을 취하는지 시각적으로 파악하는 중요한 도구입니다. 퍼널(funnel)은 단어 그대로 깔때기 형태로, 고객이 처음 유입된 후 특정 목표를 달성하기까지의 여정을 단계별로 나눈 것입니다. 이 과정에서 고객이 어느 단계에서 많이 이탈하는지 또는 어떤 단계를 개선해야 하는지 이해하는 것이 핵심입니다.

퍼널 분석의 중요성은 **전환율 최적화**에 있습니다. 목표 달성까지 고객이 거치는 과정의 각 단계에서 고객이 얼마나 이탈하는지를 파악함으로써 이탈 구간을 개선할 수 있습니다. 예를 들어 아래 이미지와 같이 많은 사용자가 회원가입을 완료하고 있지만 회원가입 쿠폰 다운로드 과정에서 이탈한다면 고객은 쿠폰의 존재를 인지하지 못하고 있을 수 있다는 문제를 발견할 수 있습니다. 이탈률이 높은 구간을 찾아내면 그 원인을 분석하고 이를 개선하는 전략을 세울 수 있습니다.

![퍼널 분석](/images/posts/looker-studio-funnel-order/01.png)

루커 스튜디오(Looker Studio)는 이러한 퍼널 분석을 시각적으로 표현하는 데 탁월한 도구입니다. 다양한 데이터 소스를 연결하여 직관적인 대시보드를 만들 수 있고 시각화를 통해 퍼널의 각 단계를 명확히 보여줍니다. 또한 **여러 데이터를 엮어서 업데이트**하고 **사용자 정의 시각화**를 통해 구체적인 인사이트를 도출할 수 있습니다. 퍼널 분석을 통해 고객 여정의 병목 현상을 파악하고 이를 바탕으로 사용자 경험을 개선하며 비즈니스 성장을 촉진할 수 있습니다.

## 2. 루커 스튜디오에서 퍼널 만들기

루커 스튜디오(Looker Studio)에서 퍼널은 여러 유형으로 만들 수 있습니다. 먼저, 이번 글에서는 퍼널 분석에 적합한 데이터를 준비하고 이를 바탕으로 시각화하는 방법을 설명합니다. 이 과정에서 퍼널 차트가 다른 차트들과 어떻게 다른지 어떤 상황에서 퍼널을 사용하는 것이 적합한지 알아보겠습니다.

### 1) 퍼널 차트의 필요성

루커 스튜디오에는 다양한 시각화 도구가 있지만 퍼널 차트를 사용하는 가장 큰 이유는 **단계별 전환율**을 명확하게 시각화할 수 있기 때문입니다. 예를 들어 파이 차트나 막대 그래프는 전체적인 비율이나 양을 표현하는 데 적합하지만 고객 여정에서 **단계별로 이탈이 일어나는 곳**을 쉽게 파악하기는 어렵습니다. 퍼널 차트는 각 단계에서의 전환율을 직관적으로 보여주며 이를 통해 각 단계가 얼마나 효율적으로 운영되고 있는지 분석할 수 있습니다.

퍼널 차트는 특히 다음과 같은 상황에서 유용합니다.

- **고객 여정 분석**: 사용자가 처음 웹사이트에 들어온 후 구매까지의 과정을 시각적으로 나타내고 싶을 때
- **이탈 분석**: 각 단계에서 얼마나 많은 사용자가 이탈하는지 확인할 때
- **마케팅 캠페인 성과 측정**: 다양한 마케팅 채널에서 유입된 고객이 얼마나 많은 전환을 이루었는지 측정할 때

### 2) 이벤트 또는 행동 정의

퍼널을 구성하려면 먼저 각 단계에서 발생하는 이벤트나 행동을 정의해야 합니다. 예를 들어 전자상거래 사이트라면 대표적으로 다음과 같은 퍼널 단계를 설정할 수 있습니다.

- **1단계**: 제품 페이지 방문
- **2단계**: 장바구니 추가
- **3단계**: 결제 진행
- **4단계**: 주문 완료(전환)

이렇게 명확한 이벤트 정의가 이루어지면 각 단계에서의 전환율을 쉽게 추적할 수 있습니다. **정확한 이벤트 선택**이 퍼널 분석의 성패를 좌우하기 때문에 비즈니스 목표에 맞는 이벤트를 설정하는 것이 중요합니다.

### 3) 퍼널 시각화 차트 설정

이제 데이터를 기반으로 퍼널 차트를 만들 차례입니다. 루커 스튜디오에서 차트를 추가할 때 '유입경로' 차트를 선택하여 각 단계별로 전환율을 시각화할 수 있습니다.

![유입 경로 메뉴](/images/posts/looker-studio-funnel-order/02.png)

루커 스튜디오의 유입경로 차트의 기본 디자인은 아래 이미지처럼 `평활화된 막대`, `계단식 막대`, `역삼각형` 세 가지로 구성되어 있고, 색상은 자유롭게 변경이 가능합니다. 하지만 이 퍼널 디자인들은 방향을 가로로 변경할 수 없고 오로지 세로 형태로 사용할 수 있습니다.

![유입 경로 차트](/images/posts/looker-studio-funnel-order/03.png)

이러한 퍼널의 각 단계는 데이터 소스에서 선택한 이벤트를 바탕으로 설정되며 이벤트 간의 발생 수에 따라 흐름이 나타납니다. 차트를 생성한 후에는 각 단계의 크기와 전환율을 확인할 수 있으며 이를 통해 전환율이 낮은 구간을 쉽게 파악할 수 있습니다.

## 3. 루커 스튜디오 퍼널과 GA4 퍼널(유입경로 탐색분석)의 차이

퍼널 분석을 이야기할 때, 구글 애널리틱스 4(GA4)의 탐색 보고서에서 제공하는 대표적인 기법 중 하나는 **유입경로 탐색분석**입니다. 이 기능은 사용자가 웹사이트에서 특정 이벤트나 페이지를 통해 최종 전환 목표에 도달하기까지의 경로를 시각적으로 분석할 수 있게 합니다. GA4의 유입경로 탐색 분석은 사용자 여정을 단계별로 분석하며, 완료율과 이탈률을 확인하고 개선할 점을 찾는 데 유용합니다.

그러나 GA4의 퍼널 분석은 **Closed Funnel** 구조를 기반으로 합니다. Closed Funnel는 사용자가 각 단계를 **순차적으로 수행한 경우에만** 퍼널에 포함됩니다. 예를 들어 아래 이미지와 같이 미리 설정한 세 단계 중에서 회원가입을 건너뛰고 바로 장바구니 담기를 수행하거나 회원가입은 했지만, 장바구니 담기를 하지 않고 바로 구매를 완료하는 경우, GA4의 유입경로 탐색분석은 이러한 사용자 행동을 퍼널에 포함하지 않습니다. 

보통 퍼널 분석이라 할 때 이렇게 단계를 순차적으로 수행한 데이터를 따라서 분석하는 것이 일반적이고 이런 방식으로 분석할 때는 GA4가 적합합니다.

![GA4 퍼널](/images/posts/looker-studio-funnel-order/04.png)

**루커 스튜디오의 퍼널 차트**는 GA4와 비교할 때 **퍼널의 정의와 구조가 다릅니다**. 루커 스튜디오는 사용자가 특정 행동 단계를 건너뛰어도 퍼널 차트에 포함될 수 있으며, 각 단계의 이벤트 수가 큰 순으로 정렬합니다. 그렇기 때문에 루커 스튜디오의 퍼널 차트는 전통적인 의미의 **Closed Funnel 분석**과는 다릅니다. 루커 스튜디오의 퍼널은 순서를 강제하지 않고 단순히 숫자를 나열해 보여주는 방식이기 때문에 정확한 사용자 여정을 분석하려면 **CASE 문**을 사용해 순서를 고정하는 추가 작업이 필요합니다.

## 4. CASE 문을 활용한 순서 고정

루커 스튜디오에서는 퍼널의 각 단계를 정확하게 시각화하기 위해 **CASE 문**을 활용하여 각 단계에 순서를 고정할 수 있습니다. 특히 회원가입 같은 과정에서는 사용자가 순서를 어기거나 단계를 반복하는 경우가 있을 수 있으므로 이를 정리하고 순서를 고정하는 것이 매우 중요합니다.

### 1) CASE 문이 필요한 이유

만약 퍼널 분석을 하려는 전자상거래 과정의 이벤트 이름이 다음과 같다고 정의해보겠습니다

- **1단계**: view_item(상품 조회)
- **2단계**: add_to_cart(장바구니 담기)
- **3단계**: begin_checkout(결제 시작)
- **4단계**: purchase(구매 완료)

이 과정에서 사용자가 상품 조회보다 장바구니 담기를 더 많이 반복하는 패턴의 흐름이 보인다고 할 때 루커스튜디오에서는 단계가 무시된 채로 아래와 같은 퍼널 형태가 나오게 됩니다.

**\* 루커 스튜디오의 역삼각형 차트는 퍼널 너비가 수에 따라 변화하지 않는 고정된 역삼각형 모양이 유지됩니다.**

![루커 스튜디오 퍼널](/images/posts/looker-studio-funnel-order/05.png)

보통 분석의 목적이 많이 발생한 이벤트 수의 흐름이 아닌 고정된 프로세스에 대한 흐름을 분석하기 위해서인데, 위 상황처럼 위에서 아래로 좁아지는 형태가 표시되는 이유는 바로 정렬 기준 때문입니다. 실제 서비스의 흐름 중 발생하는 이벤트 수는 의도한 대로 증가하지 않는 경우가 있기 때문에 숫자가 큰 순서대로 정렬되어 의도한 대로 볼 수 없는 경우가 많습니다.

![루커 스튜디오 퍼널 정렬](/images/posts/looker-studio-funnel-order/06.png)

차트의 정렬 기준에 주로 들어가는 측정항목인 `이벤트 수`, `총 사용자` 를 배치하는 것은 매우 흔한 일이지만 특정 흐름을 고정하여 보고 싶은 경우에는 원하는 대로 표시 되지 않기 때문에 강제로 순서를 배치할 수 있는 다른 방법을 사용해야 합니다. 이때 사용할 수 있는 방법이 `계산된 필드 추가`에서 CASE 문을 사용하는 것입니다.

### 2) CASE 문 예시(루커 스튜디오에서 적용)

CASE 문은 **조건에 따라 값을 바꿀 때** 사용하는 구문입니다. 데이터를 조회할 때 각 조건에 맞는 값을 지정해서, 실제 값이 아니라 의도한 대로 **값을 교체**할 수 있게 도와줍니다. 예를 들어 수집된 영어 값을 한글로 바꾼다던가 복수의 값을 하나로 합쳐서 할당하는 데 유용하게 쓰입니다.

다음은 CASE 문을 사용하여 각 단계에 고유한 순서를 부여하는 예시입니다.

{% highlight sql %}
{% raw %}

CASE
  WHEN event_name = 'view_item' THEN 1
  WHEN event_name = 'add_to_cart' THEN 2
  WHEN event_name = 'begin_checkout' THEN 3
  WHEN event_name = 'purchase' THEN 4
END

{% endraw %}
{% endhighlight %}

이 코드를 통해 각 이벤트에 고유한 숫자가 부여됩니다. 숫자에는 순서가 있기 때문에 이를 통해 사용자 행동을 순차적으로 분석할 수 있으며, 설령 사용자가 장바구니 담기 `add_to_cart`를 먼저 완료한 후 상품 페이지 조회 `view_item`로 돌아가는 상황에서도, 퍼널 차트에서는 **항상 분석을 위해 고정된 숫자의 순서대로** 이벤트 흐름이 나타나게 됩니다.

### 3) 실제 적용 예시

루커 스튜디오에서 위 CASE 문을 데이터 소스의 계산 필드로 추가하고 이 필드를 기반으로 퍼널 단계를 시각화하면 됩니다. CASE 문을 통해 반환된 값은 각 퍼널 단계의 고정된 순서를 보장합니다.

퍼널 차트에서 CASE 문을 활용해 생성된 단계 번호를 기준으로 각 단계의 전환율을 시각화할 수 있으며 이를 통해 사용자가 특정 단계를 반복하거나 건너뛸 경우에도 올바른 순서로 분석이 가능합니다.

## 마치며

퍼널 분석은 고객이 제품 또는 서비스와 상호작용하는 여정을 단계별로 명확히 이해하고 각 단계에서 발생하는 이탈률과 전환율을 개선하는 데 필수적인 도구입니다. 루커 스튜디오는 다양한 시각화 옵션과 사용자 정의 기능을 통해 퍼널 분석을 보다 직관적으로 수행할 수 있도록 지원하며, 특히 순서대로 쌓이지 않은 행동 데이터도 의도한 대로 분석할 수 있는 장점이 있습니다.

CASE 문을 활용한 순서 고정과 같은 기능은 데이터 흐름을 고정하여 퍼널 분석의 신뢰도를 높이며, GA4와 비교해 비선형적 여정을 수용하는 유연한 분석이 가능함을 보여줍니다. 루커 스튜디오의 퍼널 차트를 통해 얻은 인사이트는 단순히 전환율 향상뿐 아니라 고객 여정 전반의 사용자 경험을 최적화하고 비즈니스 성장을 위한 근거 있는 전략 수립에 중요한 역할을 합니다.

이를 통해, 퍼널 분석은 단순한 데이터 시각화 도구 이상의 가치를 지니며 지속적인 모니터링과 개선으로 사용자와의 접점을 강화할 수 있는 강력한 분석 방법론이 됩니다.

데이터 기반 의사결정이 중요해진 지금, 루커 스튜디오의 퍼널 분석을 통해 고객이 이탈하는 구간을 명확히 파악하고, 개선이 필요한 구간이 있으시다면 오픈소스마케팅에 문의해 주세요. 다양한 고객 경험을 시각화하고 전환율을 높이기 위해 최적화된 세팅을 제공하겠습니다.