{% if page.url contains '404' %}
{% else %}
<!-- begin subscribe -->
<section class="subscribe section">
  <div class="container">
    <div class="row">
      <div class="col col-12">

        <div class="subscribe__inner">
          <div class="subscribe__info">
            <h3 class="subscribe__title">{{ site.data.settings.mailchimp__settings.mailchimp__title }}</h3>
            <div class="subscribe__subtitle">
              <span id="ityped"></span>
            </div>
          </div>

          <form class="subscribe-form validate" action="{% if site.data.settings.mailchimp__settings.mailchimp__identifier %}//{{site.data.settings.mailchimp__settings.mailchimp__identifier}}{% else %}#{% endif %}" method="POST"
            id="membedded-subscribe-form" name="membedded-subscribe-form" target="_blank" novalidate>
            <label class="screen-reader-text" for="mce-EMAIL">Email address</label>
            <input class="subscribe-email required email" id="mce-EMAIL" type="text" name="EMAIL"
              placeholder="여기에 이메일을 입력하세요" required>
            <button class="button button--big subscribe-button" id="membedded-subscribe" type="submit" name="subscribe">{{ site.data.settings.mailchimp__settings.mailchimp__button__text }}</button>
          </form>

        </div>
      </div>
    </div>
  </div>
</section>
<!-- end subscribe -->
{% endif %}


<script>
  var subscribeEmail = function(){
    var emailValue = document.querySelector('#mce-EMAIL').value;
    var regExp = /^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/i;

    if (emailValue.match(regExp) != null) {
      dataLayer.push({
        'event': 'emailSubscribe',
        'value': emailValue
      });
    }
  };

  document.querySelector('#membedded-subscribe-form').addEventListener('submit', subscribeEmail);
</script>
